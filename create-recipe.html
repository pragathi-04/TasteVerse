<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Recipe - TasteVerse</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Home Page Styling for Create Recipe Page */
        .create-hero {
            background: linear-gradient(135deg, #ff6b35 0%, #f39c12 100%);
            
            padding: 120px 0 80px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .create-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/><circle cx="10" cy="60" r="0.5" fill="white" opacity="0.1"/><circle cx="90" cy="40" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
        }

        .create-hero h1 {
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 800;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .create-hero p {
            font-size: clamp(1.1rem, 2.5vw, 1.4rem);
            margin-bottom: 40px;
            opacity: 0.95;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .floating-elements {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            overflow: hidden;
        }

        .floating-icon {
            position: absolute;
            font-size: 2rem;
            opacity: 0.1;
            animation: float 6s ease-in-out infinite;
        }

        .floating-icon:nth-child(1) { top: 20%; left: 10%; animation-delay: 0s; }
        .floating-icon:nth-child(2) { top: 60%; right: 15%; animation-delay: 2s; }
        .floating-icon:nth-child(3) { bottom: 30%; left: 20%; animation-delay: 4s; }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        .create-recipe-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .form-section {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 32px;
            margin-bottom: 32px;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border-light);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            word-wrap: break-word;
        }

        .form-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--bg-gradient);
        }

        .form-section:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .form-section h2 {
            color: var(--text-dark);
            margin-bottom: 24px;
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: -0.01em;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .form-section h2 i {
            color: var(--primary-color);
            font-size: 1.3rem;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
            overflow: hidden;
            word-wrap: break-word;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-dark);
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--border-color);
            border-radius: var(--radius);
            font-size: 1rem;
            transition: var(--transition);
            outline: none;
            font-family: inherit;
            background: var(--bg-white);
            color: var(--text-dark);
            font-weight: 500;
        }
        
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
            transform: translateY(-1px);
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .ingredient-item,
        .step-item {
            display: flex;
            gap: 15px;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px;
            background: var(--bg-light);
            border-radius: var(--border-radius);
        }
        
        .ingredient-item input,
        .step-item input,
        .step-item textarea {
            flex: 1;
            margin: 0;
        }
        
        .ingredient-item .amount-input {
            width: 80px;
        }
        
        .ingredient-item .unit-select {
            width: 100px;
        }
        
        .remove-btn {
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .add-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: var(--border-radius);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 15px;
        }
        
        .add-btn:hover {
            background: var(--primary-dark);
        }
        
        .image-upload {
            border: 2px dashed var(--border-color);
            border-radius: var(--border-radius);
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .image-upload:hover {
            border-color: var(--primary-color);
            background: var(--bg-light);
        }
        
        .image-upload.dragover {
            border-color: var(--primary-color);
            background: rgba(255, 107, 53, 0.1);
        }
        
        .image-preview {
            display: none;
            margin-top: 20px;
        }
        
        .image-preview img {
            max-width: 200px;
            border-radius: var(--border-radius);
        }
        
        .form-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 40px;
        }
        
        .btn-secondary {
            background: var(--text-light);
            color: white;
        }
        
        .btn-secondary:hover {
            background: var(--text-dark);
        }
        
        .step-number {
            background: var(--primary-color);
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            flex-shrink: 0;
        }
        
        .nutrition-calculator {
            background: var(--bg-light);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-top: 20px;
        }
        
        .nutrition-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .nutrition-item {
            text-align: center;
            padding: 10px;
            background: white;
            border-radius: var(--border-radius);
        }
        
        .nutrition-value {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .nutrition-label {
            font-size: 12px;
            color: var(--text-light);
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-globe"></i>
                <span>TasteVerse</span>
            </div>
            
            <div class="nav-search">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search recipes, ingredients, or cuisines..." id="searchInput">
                    <button class="search-btn">
                        <i class="fas fa-search"></i>
                        Search
                    </button>
                </div>
            </div>
            
            <div class="nav-menu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="explore.html" class="nav-link">Explore</a>
                <a href="create-recipe.html" class="nav-link active">Create</a>
                <a href="features.html" class="nav-link">Features</a>
                <a href="grocery-list.html" class="nav-link">Grocery</a>
                <a href="user-profile.html" class="nav-link">Profile</a>
                <!-- Dark mode removed -->
                <div class="nav-auth">
                    <button class="btn btn-outline" id="loginBtn">Login</button>
                    <button class="btn btn-primary upload-btn" id="uploadBtn">
                        <i class="fas fa-plus"></i> Upload Recipe
                    </button>
                </div>
            </div>
            
            <div class="nav-toggle">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </nav>

    <!-- Create Recipe Hero Section -->
    <section class="create-hero">
        <div class="floating-elements">
            <i class="fas fa-utensils floating-icon"></i>
            <i class="fas fa-plus floating-icon"></i>
            <i class="fas fa-heart floating-icon"></i>
        </div>
        <div class="container">
            <h1>Create Your Recipe</h1>
            <p>Share your culinary creations with the TasteVerse community</p>
        </div>
    </section>

    <!-- Create Recipe Form -->
    <div class="create-recipe-container">
        <div class="form-section">
            <h2><i class="fas fa-plus-circle"></i> Create New Recipe</h2>
            
            <form id="recipeForm">
                <!-- Basic Information -->
                <div class="form-group">
                    <label for="recipeTitle">Recipe Title *</label>
                    <input type="text" id="recipeTitle" required placeholder="e.g., Classic Spaghetti Carbonara">
                </div>
                
                <div class="form-group">
                    <label for="recipeDescription">Description</label>
                    <textarea id="recipeDescription" placeholder="Describe your recipe..."></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="prepTime">Prep Time (minutes)</label>
                        <input type="number" id="prepTime" min="0" placeholder="15">
                    </div>
                    <div class="form-group">
                        <label for="cookTime">Cook Time (minutes)</label>
                        <input type="number" id="cookTime" min="0" placeholder="20">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="servings">Servings</label>
                        <input type="number" id="servings" min="1" value="4">
                    </div>
                    <div class="form-group">
                        <label for="difficulty">Difficulty</label>
                        <select id="difficulty">
                            <option value="Easy">Easy</option>
                            <option value="Medium">Medium</option>
                            <option value="Hard">Hard</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="category">Category</label>
                    <select id="category">
                        <option value="italian">Italian</option>
                        <option value="asian">Asian</option>
                        <option value="mexican">Mexican</option>
                        <option value="desserts">Desserts</option>
                        <option value="healthy">Healthy</option>
                        <option value="quick">Quick Meals</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="tags">Tags (comma-separated)</label>
                    <input type="text" id="tags" placeholder="e.g., pasta, quick, vegetarian">
                </div>
            </form>
        </div>
        
        <!-- Image Upload -->
        <div class="form-section">
            <h2><i class="fas fa-image"></i> Recipe Image</h2>
            <div class="image-upload" id="imageUpload">
                <i class="fas fa-cloud-upload-alt" style="font-size: 48px; color: var(--text-light); margin-bottom: 15px;"></i>
                <p>Drag and drop an image here, or click to select</p>
                <p style="font-size: 12px; color: var(--text-light); margin-top: 10px;">Recommended: 800x600px or larger</p>
                <input type="file" id="imageInput" accept="image/*" style="display: none;">
            </div>
            <div class="image-preview" id="imagePreview">
                <img id="previewImg" src="" alt="Preview">
                <button type="button" class="remove-btn" onclick="removeImage()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        
        <!-- Ingredients -->
        <div class="form-section">
            <h2><i class="fas fa-list"></i> Ingredients</h2>
            <div id="ingredientsList">
                <div class="ingredient-item">
                    <input type="text" placeholder="Ingredient name" class="ingredient-name">
                    <input type="number" placeholder="Amount" class="amount-input" min="0" step="0.1">
                    <select class="unit-select">
                        <option value="cup">cup</option>
                        <option value="tbsp">tbsp</option>
                        <option value="tsp">tsp</option>
                        <option value="oz">oz</option>
                        <option value="lb">lb</option>
                        <option value="g">g</option>
                        <option value="kg">kg</option>
                        <option value="ml">ml</option>
                        <option value="l">l</option>
                        <option value="piece">piece</option>
                        <option value="clove">clove</option>
                        <option value="pinch">pinch</option>
                    </select>
                    <button type="button" class="remove-btn" onclick="removeIngredient(this)">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <button type="button" class="add-btn" onclick="addIngredient()">
                <i class="fas fa-plus"></i> Add Ingredient
            </button>
        </div>
        
        <!-- Instructions -->
        <div class="form-section">
            <h2><i class="fas fa-list-ol"></i> Instructions</h2>
            <div id="stepsList">
                <div class="step-item">
                    <div class="step-number">1</div>
                    <textarea placeholder="Describe this step..." class="step-instruction"></textarea>
                    <input type="number" placeholder="Timer (min)" class="step-timer" min="0">
                    <button type="button" class="remove-btn" onclick="removeStep(this)">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <button type="button" class="add-btn" onclick="addStep()">
                <i class="fas fa-plus"></i> Add Step
            </button>
        </div>
        
        <!-- Nutrition Calculator -->
        <div class="form-section">
            <h2><i class="fas fa-calculator"></i> Nutrition Information</h2>
            <p style="color: var(--text-light); margin-bottom: 15px;">Nutrition information will be calculated automatically based on your ingredients.</p>
            <div class="nutrition-calculator">
                <button type="button" class="btn btn-primary" onclick="calculateNutrition()">
                    <i class="fas fa-calculator"></i> Calculate Nutrition
                </button>
                <div class="nutrition-grid" id="nutritionGrid" style="display: none;">
                    <div class="nutrition-item">
                        <div class="nutrition-value" id="calories">0</div>
                        <div class="nutrition-label">Calories</div>
                    </div>
                    <div class="nutrition-item">
                        <div class="nutrition-value" id="protein">0g</div>
                        <div class="nutrition-label">Protein</div>
                    </div>
                    <div class="nutrition-item">
                        <div class="nutrition-value" id="carbs">0g</div>
                        <div class="nutrition-label">Carbs</div>
                    </div>
                    <div class="nutrition-item">
                        <div class="nutrition-value" id="fat">0g</div>
                        <div class="nutrition-label">Fat</div>
                    </div>
                    <div class="nutrition-item">
                        <div class="nutrition-value" id="fiber">0g</div>
                        <div class="nutrition-label">Fiber</div>
                    </div>
                    <div class="nutrition-item">
                        <div class="nutrition-value" id="sugar">0g</div>
                        <div class="nutrition-label">Sugar</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Form Actions -->
        <div class="form-actions">
            <button type="button" class="btn btn-secondary" onclick="saveDraft()">
                <i class="fas fa-save"></i> Save as Draft
            </button>
            <button type="submit" class="btn btn-primary" form="recipeForm">
                <i class="fas fa-paper-plane"></i> Publish Recipe
            </button>
        </div>
    </div>

    <script>
        // Theme management for page
        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
            const toggle = document.getElementById('themeToggle');
            if (toggle) toggle.addEventListener('click', toggleTheme);
        });

        function initTheme() {
            const saved = localStorage.getItem('rh_theme');
            const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
            const theme = saved || (prefersDark ? 'dark' : 'light');
            setTheme(theme);
        }

        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('rh_theme', theme);
            const icon = document.querySelector('#themeToggle i');
            if (icon) {
                icon.className = theme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
            }
        }

        function toggleTheme() {
            const current = document.documentElement.getAttribute('data-theme') || 'light';
            setTheme(current === 'dark' ? 'light' : 'dark');
        }
        // Image upload functionality
        const imageUpload = document.getElementById('imageUpload');
        const imageInput = document.getElementById('imageInput');
        const imagePreview = document.getElementById('imagePreview');
        const previewImg = document.getElementById('previewImg');

        imageUpload.addEventListener('click', () => imageInput.click());
        imageUpload.addEventListener('dragover', handleDragOver);
        imageUpload.addEventListener('dragleave', handleDragLeave);
        imageUpload.addEventListener('drop', handleDrop);
        imageInput.addEventListener('change', handleImageSelect);

        function handleDragOver(e) {
            e.preventDefault();
            imageUpload.classList.add('dragover');
        }

        function handleDragLeave(e) {
            e.preventDefault();
            imageUpload.classList.remove('dragover');
        }

        function handleDrop(e) {
            e.preventDefault();
            imageUpload.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                displayImage(files[0]);
            }
        }

        function handleImageSelect(e) {
            const file = e.target.files[0];
            if (file) {
                displayImage(file);
            }
        }

        function displayImage(file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                previewImg.src = e.target.result;
                imagePreview.style.display = 'block';
                imageUpload.style.display = 'none';
            };
            reader.readAsDataURL(file);
        }

        function removeImage() {
            imagePreview.style.display = 'none';
            imageUpload.style.display = 'block';
            imageInput.value = '';
        }

        // Ingredients management
        function addIngredient() {
            const ingredientsList = document.getElementById('ingredientsList');
            const ingredientItem = document.createElement('div');
            ingredientItem.className = 'ingredient-item';
            ingredientItem.innerHTML = `
                <input type="text" placeholder="Ingredient name" class="ingredient-name">
                <input type="number" placeholder="Amount" class="amount-input" min="0" step="0.1">
                <select class="unit-select">
                    <option value="cup">cup</option>
                    <option value="tbsp">tbsp</option>
                    <option value="tsp">tsp</option>
                    <option value="oz">oz</option>
                    <option value="lb">lb</option>
                    <option value="g">g</option>
                    <option value="kg">kg</option>
                    <option value="ml">ml</option>
                    <option value="l">l</option>
                    <option value="piece">piece</option>
                    <option value="clove">clove</option>
                    <option value="pinch">pinch</option>
                </select>
                <button type="button" class="remove-btn" onclick="removeIngredient(this)">
                    <i class="fas fa-times"></i>
                </button>
            `;
            ingredientsList.appendChild(ingredientItem);
        }

        function removeIngredient(button) {
            const ingredientsList = document.getElementById('ingredientsList');
            if (ingredientsList.children.length > 1) {
                button.parentElement.remove();
            }
        }

        // Steps management
        function addStep() {
            const stepsList = document.getElementById('stepsList');
            const stepCount = stepsList.children.length + 1;
            const stepItem = document.createElement('div');
            stepItem.className = 'step-item';
            stepItem.innerHTML = `
                <div class="step-number">${stepCount}</div>
                <textarea placeholder="Describe this step..." class="step-instruction"></textarea>
                <input type="number" placeholder="Timer (min)" class="step-timer" min="0">
                <button type="button" class="remove-btn" onclick="removeStep(this)">
                    <i class="fas fa-times"></i>
                </button>
            `;
            stepsList.appendChild(stepItem);
        }

        function removeStep(button) {
            const stepsList = document.getElementById('stepsList');
            if (stepsList.children.length > 1) {
                button.parentElement.remove();
                updateStepNumbers();
            }
        }

        function updateStepNumbers() {
            const steps = document.querySelectorAll('.step-number');
            steps.forEach((step, index) => {
                step.textContent = index + 1;
            });
        }

        // Nutrition calculation (mock)
        function calculateNutrition() {
            const nutritionGrid = document.getElementById('nutritionGrid');
            nutritionGrid.style.display = 'grid';
            
            // Mock nutrition data
            document.getElementById('calories').textContent = '425';
            document.getElementById('protein').textContent = '18g';
            document.getElementById('carbs').textContent = '52g';
            document.getElementById('fat').textContent = '15g';
            document.getElementById('fiber').textContent = '3g';
            document.getElementById('sugar').textContent = '8g';
            
            showNotification('Nutrition calculated successfully!', 'success');
        }

        // Form submission
        document.getElementById('recipeForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                title: document.getElementById('recipeTitle').value,
                description: document.getElementById('recipeDescription').value,
                prepTime: parseInt(document.getElementById('prepTime').value) || 0,
                cookTime: parseInt(document.getElementById('cookTime').value) || 0,
                servings: parseInt(document.getElementById('servings').value) || 4,
                difficulty: document.getElementById('difficulty').value,
                category: document.getElementById('category').value,
                tags: document.getElementById('tags').value.split(',').map(tag => tag.trim()),
                ingredients: getIngredients(),
                steps: getSteps()
            };
            
            console.log('Recipe data:', formData);
            showNotification('Recipe published successfully!', 'success');
            
            // Redirect to home page after 2 seconds
            setTimeout(() => {
                window.location.href = '../index.html';
            }, 2000);
        });

        function getIngredients() {
            const ingredients = [];
            document.querySelectorAll('.ingredient-item').forEach(item => {
                const name = item.querySelector('.ingredient-name').value;
                const amount = parseFloat(item.querySelector('.amount-input').value) || 0;
                const unit = item.querySelector('.unit-select').value;
                
                if (name) {
                    ingredients.push({ name, amount, unit });
                }
            });
            return ingredients;
        }

        function getSteps() {
            const steps = [];
            document.querySelectorAll('.step-item').forEach((item, index) => {
                const instruction = item.querySelector('.step-instruction').value;
                const timer = parseInt(item.querySelector('.step-timer').value) || null;
                
                if (instruction) {
                    steps.push({ order: index + 1, instruction, timer });
                }
            });
            return steps;
        }

        function saveDraft() {
            showNotification('Draft saved successfully!', 'info');
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <div class="notification-content">
                    <span>${message}</span>
                    <button class="notification-close">&times;</button>
                </div>
            `;
            
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#4CAF50' : type === 'error' ? '#f44336' : '#2196F3'};
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 3000;
                transform: translateX(100%);
                transition: transform 0.3s ease;
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 3000);
            
            notification.querySelector('.notification-close').addEventListener('click', () => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    notification.remove();
                }, 300);
            });
        }
    </script>
    <script src="script.js"></script>
</body>
</html>
