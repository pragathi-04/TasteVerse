<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe Detail - RecipeHub</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        .recipe-detail-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .recipe-header {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            margin-bottom: 60px;
            align-items: start;
        }
        
        .recipe-images {
            position: relative;
        }
        
        .main-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 12px;
            box-shadow: var(--shadow-hover);
        }
        
        .image-thumbnails {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            overflow-x: auto;
        }
        
        .thumbnail {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            opacity: 0.7;
            transition: var(--transition);
        }
        
        .thumbnail.active,
        .thumbnail:hover {
            opacity: 1;
            transform: scale(1.05);
        }
        
        .recipe-info {
            padding: 20px 0;
        }
        
        .recipe-title {
            font-size: clamp(1.8rem, 4vw, 2.25rem);
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 15px;
            line-height: 1.2;
            word-wrap: break-word;
            hyphens: auto;
        }
        
        .recipe-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-light);
            font-size: 14px;
        }
        
        .meta-item i {
            color: var(--primary-color);
        }
        
        .recipe-rating {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .stars {
            display: flex;
            gap: 2px;
        }
        
        .stars i {
            color: var(--accent-color);
            font-size: 18px;
        }
        
        .rating-text {
            color: var(--text-light);
            font-size: 14px;
        }
        
        .recipe-description {
            font-size: 16px;
            line-height: 1.6;
            color: var(--text-dark);
            margin-bottom: 30px;
            word-wrap: break-word;
            hyphens: auto;
        }
        
        .recipe-actions {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            border: 2px solid var(--border-color);
            background: white;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }
        
        .action-btn:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }
        
        .action-btn.liked {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .action-btn.saved {
            background: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }
        
        .recipe-author {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px;
            background: var(--bg-light);
            border-radius: var(--border-radius);
        }
        
        .author-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .author-info h4 {
            margin-bottom: 5px;
            color: var(--text-dark);
        }
        
        .author-info p {
            color: var(--text-light);
            font-size: 14px;
        }
        
        .follow-btn {
            margin-left: auto;
            padding: 8px 16px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
        }
        
        .follow-btn:hover {
            background: var(--primary-dark);
        }
        
        .recipe-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 60px;
            margin-bottom: 60px;
        }
        
        .recipe-main {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: var(--shadow);
        }
        
        .recipe-sidebar {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        
        .servings-control {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            text-align: center;
        }
        
        .servings-control h3 {
            margin-bottom: 20px;
            color: var(--text-dark);
        }
        
        .servings-input {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .servings-btn {
            width: 40px;
            height: 40px;
            border: 2px solid var(--border-color);
            background: white;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        
        .servings-btn:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }
        
        .servings-number {
            font-size: 24px;
            font-weight: 600;
            color: var(--text-dark);
            min-width: 40px;
            text-align: center;
        }
        
        .ingredients-list {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: var(--shadow);
        }
        
        .ingredients-list h3 {
            margin-bottom: 20px;
            color: var(--text-dark);
        }
        
        .ingredient-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
        }
        
        .ingredient-item:last-child {
            border-bottom: none;
        }
        
        .ingredient-name {
            font-weight: 500;
            color: var(--text-dark);
        }
        
        .ingredient-amount {
            color: var(--text-light);
            font-weight: 500;
        }
        
        .nutrition-facts {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: var(--shadow);
        }
        
        .nutrition-facts h3 {
            margin-bottom: 20px;
            color: var(--text-dark);
        }
        
        .nutrition-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .nutrition-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
        }
        
        .nutrition-item:last-child {
            border-bottom: none;
        }
        
        .nutrition-label {
            color: var(--text-light);
        }
        
        .nutrition-value {
            font-weight: 600;
            color: var(--text-dark);
        }
        
        .instructions {
            margin-bottom: 40px;
        }
        
        .instructions h3 {
            margin-bottom: 30px;
            color: var(--text-dark);
        }
        
        .instruction-step {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            padding: 20px;
            background: var(--bg-light);
            border-radius: var(--border-radius);
        }
        
        .step-number {
            background: var(--primary-color);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            flex-shrink: 0;
        }
        
        .step-content {
            flex: 1;
        }
        
        .step-text {
            font-size: 16px;
            line-height: 1.6;
            color: var(--text-dark);
            margin-bottom: 10px;
        }
        
        .step-timer {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-light);
            font-size: 14px;
        }
        
        .step-timer i {
            color: var(--accent-color);
        }
        
        .comments-section {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            margin-bottom: 40px;
        }
        
        .comments-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .comments-header h3 {
            color: var(--text-dark);
        }
        
        .comment-form {
            margin-bottom: 40px;
        }
        
        .comment-input {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 14px;
            resize: vertical;
            min-height: 100px;
            margin-bottom: 15px;
            outline: none;
            transition: var(--transition);
        }
        
        .comment-input:focus {
            border-color: var(--primary-color);
        }
        
        .comment {
            margin-bottom: 25px;
            padding: 20px;
            background: var(--bg-light);
            border-radius: var(--border-radius);
        }
        
        .comment-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
        }
        
        .comment-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .comment-author {
            font-weight: 600;
            color: var(--text-dark);
        }
        
        .comment-date {
            color: var(--text-light);
            font-size: 12px;
        }
        
        .comment-rating {
            margin-left: auto;
            display: flex;
            gap: 2px;
        }
        
        .comment-rating i {
            color: var(--accent-color);
            font-size: 12px;
        }
        
        .comment-text {
            color: var(--text-dark);
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .comment-actions {
            display: flex;
            gap: 15px;
        }
        
        .comment-action {
            background: none;
            border: none;
            color: var(--text-light);
            cursor: pointer;
            font-size: 12px;
            transition: var(--transition);
        }
        
        .comment-action:hover {
            color: var(--primary-color);
        }
        
        .reply {
            margin-left: 40px;
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: var(--border-radius);
        }
        
        .similar-recipes {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: var(--shadow);
        }
        
        .similar-recipes h3 {
            margin-bottom: 30px;
            color: var(--text-dark);
        }
        
        .similar-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .similar-recipe {
            cursor: pointer;
            transition: var(--transition);
        }
        
        .similar-recipe:hover {
            transform: translateY(-5px);
        }
        
        .similar-recipe img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: var(--border-radius);
            margin-bottom: 10px;
        }
        
        .similar-recipe h4 {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 5px;
        }
        
        .similar-recipe p {
            font-size: 12px;
            color: var(--text-light);
        }
        
        /* Cooking Mode Styles */
        .cooking-mode {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-white);
            z-index: 2000;
            display: none;
            flex-direction: column;
        }
        
        .cooking-mode.active {
            display: flex;
        }
        
        .cooking-header {
            background: var(--bg-gradient);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .cooking-title {
            font-size: 24px;
            font-weight: 600;
        }
        
        .cooking-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .cooking-step-counter {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 500;
        }
        
        .cooking-content {
            flex: 1;
            display: flex;
            overflow: hidden;
        }
        
        .cooking-sidebar {
            width: 300px;
            background: var(--bg-light);
            padding: 20px;
            overflow-y: auto;
        }
        
        .cooking-main {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .cooking-step {
            text-align: center;
            max-width: 600px;
        }
        
        .cooking-step-number {
            background: var(--primary-color);
            color: white;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: 700;
            margin: 0 auto 30px;
        }
        
        .cooking-step-text {
            font-size: 24px;
            line-height: 1.6;
            color: var(--text-dark);
            margin-bottom: 30px;
        }
        
        .cooking-step-image {
            width: 100%;
            max-width: 400px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
        }
        
        .cooking-timer {
            background: var(--accent-color);
            color: white;
            padding: 20px;
            border-radius: var(--border-radius);
            text-align: center;
            margin-bottom: 30px;
        }
        
        .cooking-timer-display {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .cooking-navigation {
            display: flex;
            gap: 20px;
            justify-content: center;
        }
        
        .cooking-btn {
            padding: 15px 30px;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .cooking-btn-primary {
            background: var(--primary-color);
            color: white;
        }
        
        .cooking-btn-secondary {
            background: var(--bg-light);
            color: var(--text-dark);
        }
        
        .cooking-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        .ingredient-checklist {
            margin-bottom: 30px;
        }
        
        .ingredient-checklist h3 {
            margin-bottom: 15px;
            color: var(--text-dark);
        }
        
        .checklist-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
        }
        
        .checklist-item:last-child {
            border-bottom: none;
        }
        
        .checklist-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid var(--primary-color);
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        
        .checklist-checkbox.checked {
            background: var(--primary-color);
            color: white;
        }
        
        .checklist-text {
            flex: 1;
            color: var(--text-dark);
        }
        
        .checklist-text.completed {
            text-decoration: line-through;
            color: var(--text-light);
        }
        
        .cooking-mode-btn {
            background: var(--accent-color) !important;
            color: white !important;
            border: none !important;
        }
        
        .cooking-mode-btn:hover {
            background: var(--primary-color) !important;
            transform: translateY(-2px);
        }
        
        @media (max-width: 768px) {
            .recipe-header {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .recipe-content {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .recipe-actions {
                flex-wrap: wrap;
            }
            
            .nutrition-grid {
                grid-template-columns: 1fr;
            }
            
            .similar-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .cooking-content {
                flex-direction: column;
            }
            
            .cooking-sidebar {
                width: 100%;
                max-height: 200px;
            }
            
            .cooking-step-text {
                font-size: 20px;
            }
            
            .cooking-timer-display {
                font-size: 36px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-utensils"></i>
                <span>RecipeHub</span>
            </div>
            
            <div class="nav-search">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search recipes, ingredients, or cuisines..." id="searchInput">
                    <button class="search-btn">
                        <i class="fas fa-search"></i>
                        Search
                    </button>
                </div>
            </div>
            
            <div class="nav-menu">
                <a href="../index.html" class="nav-link">Home</a>
                <a href="browse.html" class="nav-link">Browse</a>
                <a href="create-recipe.html" class="nav-link">Create</a>
                <a href="#" class="nav-link">My Recipes</a>
                <!-- Dark mode removed -->
                <div class="nav-auth">
                    <button class="btn btn-outline" id="loginBtn">Login</button>
                    <button class="btn btn-primary" id="signupBtn">Sign Up</button>
                </div>
            </div>
            
            <div class="nav-toggle">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </nav>

    <!-- Recipe Detail Content -->
    <div class="recipe-detail-container">
        <!-- Recipe Header -->
        <div class="recipe-header">
            <div class="recipe-images">
                <img src="https://images.unsplash.com/photo-1621996346565-e3dbc353d2e5?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Classic Spaghetti Carbonara" class="main-image" id="mainImage">
                <div class="image-thumbnails">
                    <img src="https://images.unsplash.com/photo-1621996346565-e3dbc353d2e5?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" alt="Thumbnail 1" class="thumbnail active" onclick="changeImage(this)">
                    <img src="https://images.unsplash.com/photo-1551183053-bf91a1d81141?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" alt="Thumbnail 2" class="thumbnail" onclick="changeImage(this)">
                    <img src="https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" alt="Thumbnail 3" class="thumbnail" onclick="changeImage(this)">
                </div>
            </div>
            
            <div class="recipe-info">
                <h1 class="recipe-title">Classic Spaghetti Carbonara</h1>
                
                <div class="recipe-meta">
                    <div class="meta-item">
                        <i class="fas fa-clock"></i>
                        <span>15 min prep</span>
                    </div>
                    <div class="meta-item">
                        <i class="fas fa-fire"></i>
                        <span>20 min cook</span>
                    </div>
                    <div class="meta-item">
                        <i class="fas fa-users"></i>
                        <span>4 servings</span>
                    </div>
                    <div class="meta-item">
                        <i class="fas fa-signal"></i>
                        <span>Medium</span>
                    </div>
                </div>
                
                <div class="recipe-rating">
                    <div class="stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <span class="rating-text">4.8 (124 reviews)</span>
                </div>
                
                <p class="recipe-description">
                    A traditional Italian pasta dish with eggs, cheese, and pancetta. This authentic carbonara recipe creates a creamy, rich sauce without using cream, just like they make it in Rome.
                </p>
                
                <div class="recipe-actions">
                    <button class="action-btn cooking-mode-btn" onclick="startCookingMode()">
                        <i class="fas fa-play"></i>
                        <span>Start Cooking</span>
                    </button>
                    <button class="action-btn" id="likeBtn" onclick="toggleLike()">
                        <i class="far fa-heart"></i>
                        <span>Like (89)</span>
                    </button>
                    <button class="action-btn" id="saveBtn" onclick="toggleSave()">
                        <i class="far fa-bookmark"></i>
                        <span>Save</span>
                    </button>
                    <button class="action-btn" onclick="shareRecipe()">
                        <i class="fas fa-share"></i>
                        <span>Share</span>
                    </button>
                    <button class="action-btn" onclick="printRecipe()">
                        <i class="fas fa-print"></i>
                        <span>Print</span>
                    </button>
                </div>
                
                <div class="recipe-author">
                    <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80" alt="Marco Rossi" class="author-avatar">
                    <div class="author-info">
                        <h4>Marco Rossi</h4>
                        <p>Italian Chef â€¢ 245 recipes</p>
                    </div>
                    <button class="follow-btn" onclick="toggleFollow()">Follow</button>
                </div>
            </div>
        </div>
        
        <!-- Recipe Content -->
        <div class="recipe-content">
            <div class="recipe-main">
                <!-- Ingredients -->
                <div class="ingredients-section">
                    <h3><i class="fas fa-list"></i> Ingredients</h3>
                    <div class="ingredients-list" id="ingredientsList">
                        <div class="ingredient-item">
                            <span class="ingredient-name">Spaghetti</span>
                            <span class="ingredient-amount">400g</span>
                        </div>
                        <div class="ingredient-item">
                            <span class="ingredient-name">Pancetta</span>
                            <span class="ingredient-amount">150g</span>
                        </div>
                        <div class="ingredient-item">
                            <span class="ingredient-name">Large eggs</span>
                            <span class="ingredient-amount">4</span>
                        </div>
                        <div class="ingredient-item">
                            <span class="ingredient-name">Pecorino Romano</span>
                            <span class="ingredient-amount">100g</span>
                        </div>
                        <div class="ingredient-item">
                            <span class="ingredient-name">Black pepper</span>
                            <span class="ingredient-amount">1 tsp</span>
                        </div>
                        <div class="ingredient-item">
                            <span class="ingredient-name">Salt</span>
                            <span class="ingredient-amount">to taste</span>
                        </div>
                    </div>
                </div>
                
                <!-- Instructions -->
                <div class="instructions">
                    <h3><i class="fas fa-list-ol"></i> Instructions</h3>
                    
                    <div class="instruction-step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <p class="step-text">Bring a large pot of salted water to boil. Add spaghetti and cook according to package directions until al dente.</p>
                            <div class="step-timer">
                                <i class="fas fa-clock"></i>
                                <span>12 minutes</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="instruction-step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <p class="step-text">Meanwhile, cut pancetta into small cubes and cook in a large skillet over medium heat until crispy and golden.</p>
                            <div class="step-timer">
                                <i class="fas fa-clock"></i>
                                <span>8 minutes</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="instruction-step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <p class="step-text">In a bowl, whisk together eggs, grated Pecorino Romano, and black pepper until well combined.</p>
                        </div>
                    </div>
                    
                    <div class="instruction-step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <p class="step-text">Drain pasta, reserving 1 cup of pasta water. Add hot pasta to the skillet with pancetta and toss to combine.</p>
                        </div>
                    </div>
                    
                    <div class="instruction-step">
                        <div class="step-number">5</div>
                        <div class="step-content">
                            <p class="step-text">Remove skillet from heat. Quickly add egg mixture and toss vigorously, adding pasta water as needed to create a creamy sauce.</p>
                        </div>
                    </div>
                    
                    <div class="instruction-step">
                        <div class="step-number">6</div>
                        <div class="step-content">
                            <p class="step-text">Serve immediately with extra Pecorino Romano and black pepper on top.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="recipe-sidebar">
                <!-- Servings Control -->
                <div class="servings-control">
                    <h3>Servings</h3>
                    <div class="servings-input">
                        <button class="servings-btn" onclick="adjustServings(-1)">
                            <i class="fas fa-minus"></i>
                        </button>
                        <span class="servings-number" id="servingsNumber">4</span>
                        <button class="servings-btn" onclick="adjustServings(1)">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    <p style="color: var(--text-light); font-size: 14px;">Adjust ingredients automatically</p>
                </div>
                
                <!-- Nutrition Facts -->
                <div class="nutrition-facts">
                    <h3><i class="fas fa-chart-pie"></i> Nutrition Facts</h3>
                    <div class="nutrition-grid">
                        <div class="nutrition-item">
                            <span class="nutrition-label">Calories</span>
                            <span class="nutrition-value">425</span>
                        </div>
                        <div class="nutrition-item">
                            <span class="nutrition-label">Protein</span>
                            <span class="nutrition-value">18g</span>
                        </div>
                        <div class="nutrition-item">
                            <span class="nutrition-label">Carbs</span>
                            <span class="nutrition-value">52g</span>
                        </div>
                        <div class="nutrition-item">
                            <span class="nutrition-label">Fat</span>
                            <span class="nutrition-value">15g</span>
                        </div>
                        <div class="nutrition-item">
                            <span class="nutrition-label">Fiber</span>
                            <span class="nutrition-value">3g</span>
                        </div>
                        <div class="nutrition-item">
                            <span class="nutrition-label">Sugar</span>
                            <span class="nutrition-value">2g</span>
                        </div>
                        <div class="nutrition-item">
                            <span class="nutrition-label">Sodium</span>
                            <span class="nutrition-value">680mg</span>
                        </div>
                        <div class="nutrition-item">
                            <span class="nutrition-label">Cholesterol</span>
                            <span class="nutrition-value">185mg</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Comments Section -->
        <div class="comments-section">
            <div class="comments-header">
                <h3><i class="fas fa-comments"></i> Reviews & Comments (124)</h3>
                <button class="btn btn-primary" onclick="showCommentForm()">Write Review</button>
            </div>
            
            <div class="comment-form" id="commentForm" style="display: none;">
                <textarea class="comment-input" placeholder="Share your thoughts about this recipe..."></textarea>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div class="stars" id="ratingStars">
                        <i class="far fa-star" onclick="setRating(1)"></i>
                        <i class="far fa-star" onclick="setRating(2)"></i>
                        <i class="far fa-star" onclick="setRating(3)"></i>
                        <i class="far fa-star" onclick="setRating(4)"></i>
                        <i class="far fa-star" onclick="setRating(5)"></i>
                    </div>
                    <button class="btn btn-primary" onclick="submitComment()">Submit Review</button>
                </div>
            </div>
            
            <div class="comment">
                <div class="comment-header">
                    <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80" alt="Sarah Johnson" class="comment-avatar">
                    <div>
                        <div class="comment-author">Sarah Johnson</div>
                        <div class="comment-date">2 days ago</div>
                    </div>
                    <div class="comment-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                </div>
                <p class="comment-text">
                    Absolutely delicious! This is the best carbonara recipe I've ever tried. The technique of adding the egg mixture off the heat is perfect - no scrambled eggs! My family loved it.
                </p>
                <div class="comment-actions">
                    <button class="comment-action" onclick="likeComment(this)">
                        <i class="far fa-thumbs-up"></i> Helpful (12)
                    </button>
                    <button class="comment-action" onclick="replyToComment(this)">
                        <i class="fas fa-reply"></i> Reply
                    </button>
                </div>
                
                <div class="reply">
                    <div class="comment-header">
                        <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80" alt="Marco Rossi" class="comment-avatar">
                        <div>
                            <div class="comment-author">Marco Rossi (Author)</div>
                            <div class="comment-date">1 day ago</div>
                        </div>
                    </div>
                    <p class="comment-text">
                        Thank you Sarah! I'm so glad you enjoyed it. The key is indeed removing from heat before adding the eggs. Buon appetito! ðŸ‡®ðŸ‡¹
                    </p>
                </div>
            </div>
            
            <div class="comment">
                <div class="comment-header">
                    <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80" alt="Mike Chen" class="comment-avatar">
                    <div>
                        <div class="comment-author">Mike Chen</div>
                        <div class="comment-date">1 week ago</div>
                    </div>
                    <div class="comment-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="far fa-star"></i>
                    </div>
                </div>
                <p class="comment-text">
                    Great recipe! I used bacon instead of pancetta and it still turned out amazing. The pasta water trick really makes the difference for the creamy texture.
                </p>
                <div class="comment-actions">
                    <button class="comment-action" onclick="likeComment(this)">
                        <i class="far fa-thumbs-up"></i> Helpful (8)
                    </button>
                    <button class="comment-action" onclick="replyToComment(this)">
                        <i class="fas fa-reply"></i> Reply
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Similar Recipes -->
        <div class="similar-recipes">
            <h3><i class="fas fa-utensils"></i> Similar Recipes</h3>
            <div class="similar-grid">
                <div class="similar-recipe" onclick="goToRecipe(2)">
                    <img src="https://images.unsplash.com/photo-1551183053-bf91a1d81141?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80" alt="Creamy Mushroom Pasta">
                    <h4>Creamy Mushroom Pasta</h4>
                    <p>4.6 â€¢ 15 min</p>
                </div>
                <div class="similar-recipe" onclick="goToRecipe(3)">
                    <img src="https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80" alt="Pasta Aglio e Olio">
                    <h4>Pasta Aglio e Olio</h4>
                    <p>4.4 â€¢ 10 min</p>
                </div>
                <div class="similar-recipe" onclick="goToRecipe(4)">
                    <img src="https://images.unsplash.com/photo-1621996346565-e3dbc353d2e5?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80" alt="Spaghetti Bolognese">
                    <h4>Spaghetti Bolognese</h4>
                    <p>4.7 â€¢ 45 min</p>
                </div>
                <div class="similar-recipe" onclick="goToRecipe(5)">
                    <img src="https://images.unsplash.com/photo-1551183053-bf91a1d81141?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80" alt="Fettuccine Alfredo">
                    <h4>Fettuccine Alfredo</h4>
                    <p>4.5 â€¢ 20 min</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Cooking Mode -->
    <div class="cooking-mode" id="cookingMode">
        <div class="cooking-header">
            <div class="cooking-title">Classic Spaghetti Carbonara</div>
            <div class="cooking-controls">
                <div class="cooking-step-counter">
                    Step <span id="currentStepNumber">1</span> of <span id="totalSteps">6</span>
                </div>
                <button class="cooking-btn cooking-btn-secondary" onclick="exitCookingMode()">
                    <i class="fas fa-times"></i> Exit
                </button>
            </div>
        </div>
        
        <div class="cooking-content">
            <div class="cooking-sidebar">
                <div class="ingredient-checklist">
                    <h3><i class="fas fa-list-check"></i> Ingredients Checklist</h3>
                    <div id="ingredientChecklist">
                        <div class="checklist-item">
                            <div class="checklist-checkbox" onclick="toggleIngredient(this)">
                                <i class="fas fa-check" style="display: none;"></i>
                            </div>
                            <div class="checklist-text">400g Spaghetti</div>
                        </div>
                        <div class="checklist-item">
                            <div class="checklist-checkbox" onclick="toggleIngredient(this)">
                                <i class="fas fa-check" style="display: none;"></i>
                            </div>
                            <div class="checklist-text">150g Pancetta</div>
                        </div>
                        <div class="checklist-item">
                            <div class="checklist-checkbox" onclick="toggleIngredient(this)">
                                <i class="fas fa-check" style="display: none;"></i>
                            </div>
                            <div class="checklist-text">4 Large eggs</div>
                        </div>
                        <div class="checklist-item">
                            <div class="checklist-checkbox" onclick="toggleIngredient(this)">
                                <i class="fas fa-check" style="display: none;"></i>
                            </div>
                            <div class="checklist-text">100g Pecorino Romano</div>
                        </div>
                        <div class="checklist-item">
                            <div class="checklist-checkbox" onclick="toggleIngredient(this)">
                                <i class="fas fa-check" style="display: none;"></i>
                            </div>
                            <div class="checklist-text">1 tsp Black pepper</div>
                        </div>
                        <div class="checklist-item">
                            <div class="checklist-checkbox" onclick="toggleIngredient(this)">
                                <i class="fas fa-check" style="display: none;"></i>
                            </div>
                            <div class="checklist-text">Salt to taste</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="cooking-main">
                <div class="cooking-step" id="cookingStep">
                    <div class="cooking-step-number" id="stepNumber">1</div>
                    <p class="cooking-step-text" id="stepText">
                        Bring a large pot of salted water to boil. Add spaghetti and cook according to package directions until al dente.
                    </p>
                    <div class="cooking-timer" id="stepTimer" style="display: none;">
                        <div class="cooking-timer-display" id="timerDisplay">12:00</div>
                        <div>Minutes remaining</div>
                    </div>
                    <div class="cooking-navigation">
                        <button class="cooking-btn cooking-btn-secondary" id="prevBtn" onclick="previousStep()" disabled>
                            <i class="fas fa-chevron-left"></i> Previous
                        </button>
                        <button class="cooking-btn cooking-btn-primary" id="nextBtn" onclick="nextStep()">
                            Next <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentServings = 4;
        let isLiked = false;
        let isSaved = false;
        let isFollowing = false;
        let userRating = 0;
        
        // Cooking Mode Variables
        let currentCookingStep = 1;
        let cookingSteps = [
            {
                number: 1,
                text: "Bring a large pot of salted water to boil. Add spaghetti and cook according to package directions until al dente.",
                timer: 12,
                timerText: "12:00"
            },
            {
                number: 2,
                text: "Meanwhile, cut pancetta into small cubes and cook in a large skillet over medium heat until crispy and golden.",
                timer: 8,
                timerText: "8:00"
            },
            {
                number: 3,
                text: "In a bowl, whisk together eggs, grated Pecorino Romano, and black pepper until well combined.",
                timer: null,
                timerText: null
            },
            {
                number: 4,
                text: "Drain pasta, reserving 1 cup of pasta water. Add hot pasta to the skillet with pancetta and toss to combine.",
                timer: null,
                timerText: null
            },
            {
                number: 5,
                text: "Remove skillet from heat. Quickly add egg mixture and toss vigorously, adding pasta water as needed to create a creamy sauce.",
                timer: null,
                timerText: null
            },
            {
                number: 6,
                text: "Serve immediately with extra Pecorino Romano and black pepper on top.",
                timer: null,
                timerText: null
            }
        ];

        // Theme management
        document.addEventListener('DOMContentLoaded', function() {
            // Dark mode removed
            // Nav search button â†’ redirect to browse with query
            const navSearchBtn = document.querySelector('.nav-search .search-btn');
            if (navSearchBtn) {
                navSearchBtn.addEventListener('click', function() {
                    const term = (document.getElementById('searchInput')?.value || '').trim();
                    const url = term ? `browse.html?q=${encodeURIComponent(term)}` : 'browse.html';
                    window.location.href = url;
                });
            }
            // Initialize saved state
            initSavedState();
        });

        function initTheme() {
            const saved = localStorage.getItem('rh_theme');
            const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
            const theme = saved || (prefersDark ? 'dark' : 'light');
            setTheme(theme);
        }

        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('rh_theme', theme);
            const icon = document.querySelector('#themeToggle i');
            if (icon) {
                icon.className = theme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
            }
        }

        function toggleTheme() {
            const current = document.documentElement.getAttribute('data-theme') || 'light';
            setTheme(current === 'dark' ? 'light' : 'dark');
        }

        // Image carousel functionality
        function changeImage(thumbnail) {
            const mainImage = document.getElementById('mainImage');
            const thumbnails = document.querySelectorAll('.thumbnail');
            
            // Update main image
            mainImage.src = thumbnail.src.replace('w=200', 'w=800');
            mainImage.alt = thumbnail.alt;
            
            // Update active thumbnail
            thumbnails.forEach(thumb => thumb.classList.remove('active'));
            thumbnail.classList.add('active');
        }

        // Servings adjustment
        function adjustServings(change) {
            currentServings = Math.max(1, currentServings + change);
            document.getElementById('servingsNumber').textContent = currentServings;
            updateIngredients();
        }

        function updateIngredients() {
            const ingredients = [
                { name: 'Spaghetti', baseAmount: 400, unit: 'g' },
                { name: 'Pancetta', baseAmount: 150, unit: 'g' },
                { name: 'Large eggs', baseAmount: 4, unit: '' },
                { name: 'Pecorino Romano', baseAmount: 100, unit: 'g' },
                { name: 'Black pepper', baseAmount: 1, unit: 'tsp' },
                { name: 'Salt', baseAmount: 1, unit: 'to taste' }
            ];

            const ingredientsList = document.getElementById('ingredientsList');
            ingredientsList.innerHTML = ingredients.map(ingredient => {
                const adjustedAmount = Math.round((ingredient.baseAmount * currentServings / 4) * 10) / 10;
                const displayAmount = ingredient.unit === '' ? Math.round(adjustedAmount) : adjustedAmount;
                return `
                    <div class="ingredient-item">
                        <span class="ingredient-name">${ingredient.name}</span>
                        <span class="ingredient-amount">${displayAmount}${ingredient.unit}</span>
                    </div>
                `;
            }).join('');
        }

        // Action buttons
        function toggleLike() {
            const likeBtn = document.getElementById('likeBtn');
            const likeCount = likeBtn.querySelector('span');
            
            isLiked = !isLiked;
            likeBtn.classList.toggle('liked', isLiked);
            
            if (isLiked) {
                likeBtn.querySelector('i').className = 'fas fa-heart';
                likeCount.textContent = 'Like (90)';
            } else {
                likeBtn.querySelector('i').className = 'far fa-heart';
                likeCount.textContent = 'Like (89)';
            }
        }

        function toggleSave() {
            const saveBtn = document.getElementById('saveBtn');
            const recipeId = getRecipeId();
            isSaved = !isSaved;
            updateFavoritesStorage(recipeId, isSaved, {
                id: recipeId,
                title: 'Classic Spaghetti Carbonara',
                image: document.getElementById('mainImage')?.src || '',
                servings: currentServings
            });
            saveBtn.classList.toggle('saved', isSaved);
            saveBtn.querySelector('i').className = isSaved ? 'fas fa-bookmark' : 'far fa-bookmark';
            saveBtn.querySelector('span').textContent = isSaved ? 'Saved' : 'Save';
        }

        function toggleFollow() {
            const followBtn = document.querySelector('.follow-btn');
            isFollowing = !isFollowing;
            
            if (isFollowing) {
                followBtn.textContent = 'Following';
                followBtn.style.background = 'var(--text-light)';
            } else {
                followBtn.textContent = 'Follow';
                followBtn.style.background = 'var(--primary-color)';
            }
        }

        function shareRecipe() {
            if (navigator.share) {
                navigator.share({
                    title: 'Classic Spaghetti Carbonara',
                    text: 'Check out this amazing carbonara recipe!',
                    url: window.location.href
                });
            } else {
                // Fallback: copy to clipboard
                navigator.clipboard.writeText(window.location.href);
                showNotification('Recipe link copied to clipboard!', 'success');
            }
        }

        // Favorites helpers
        function getRecipeId() {
            const url = new URL(window.location.href);
            const idParam = url.searchParams.get('id');
            return idParam ? idParam : '1';
        }

        function loadFavorites() {
            try {
                return JSON.parse(localStorage.getItem('rh_favorites') || '[]');
            } catch(e) {
                return [];
            }
        }

        function saveFavorites(list) {
            localStorage.setItem('rh_favorites', JSON.stringify(list));
        }

        function isFavorite(id) {
            const favs = loadFavorites();
            return favs.some(r => String(r.id) === String(id));
        }

        function updateFavoritesStorage(id, shouldSave, data) {
            let favs = loadFavorites();
            if (shouldSave) {
                if (!isFavorite(id)) {
                    favs.push(data);
                }
            } else {
                favs = favs.filter(r => String(r.id) !== String(id));
            }
            saveFavorites(favs);
        }

        function initSavedState() {
            const recipeId = getRecipeId();
            const saveBtn = document.getElementById('saveBtn');
            isSaved = isFavorite(recipeId);
            saveBtn.classList.toggle('saved', isSaved);
            saveBtn.querySelector('i').className = isSaved ? 'fas fa-bookmark' : 'far fa-bookmark';
            saveBtn.querySelector('span').textContent = isSaved ? 'Saved' : 'Save';
        }

        function printRecipe() {
            window.print();
        }

        // Comments functionality
        function showCommentForm() {
            const commentForm = document.getElementById('commentForm');
            commentForm.style.display = commentForm.style.display === 'none' ? 'block' : 'none';
        }

        function setRating(rating) {
            userRating = rating;
            const stars = document.querySelectorAll('#ratingStars i');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.className = 'fas fa-star';
                } else {
                    star.className = 'far fa-star';
                }
            });
        }

        function submitComment() {
            const commentInput = document.querySelector('.comment-input');
            if (commentInput.value.trim() && userRating > 0) {
                showNotification('Review submitted successfully!', 'success');
                commentInput.value = '';
                setRating(0);
                document.getElementById('commentForm').style.display = 'none';
            } else {
                showNotification('Please provide both a rating and comment.', 'error');
            }
        }

        function likeComment(button) {
            const icon = button.querySelector('i');
            const text = button.querySelector('span');
            const currentCount = parseInt(text.textContent.match(/\d+/)[0]);
            
            if (icon.classList.contains('far')) {
                icon.className = 'fas fa-thumbs-up';
                text.textContent = `Helpful (${currentCount + 1})`;
                button.style.color = 'var(--primary-color)';
            } else {
                icon.className = 'far fa-thumbs-up';
                text.textContent = `Helpful (${currentCount - 1})`;
                button.style.color = 'var(--text-light)';
            }
        }

        function replyToComment(button) {
            showNotification('Reply functionality would be implemented here.', 'info');
        }

        function goToRecipe(recipeId) {
            showNotification(`Navigating to recipe ${recipeId}...`, 'info');
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <div class="notification-content">
                    <span>${message}</span>
                    <button class="notification-close">&times;</button>
                </div>
            `;
            
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#4CAF50' : type === 'error' ? '#f44336' : '#2196F3'};
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 3000;
                transform: translateX(100%);
                transition: transform 0.3s ease;
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 3000);
            
            notification.querySelector('.notification-close').addEventListener('click', () => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    notification.remove();
                }, 300);
            });
        }
    </script>
    <script src="script.js"></script>
</body>
</html>
